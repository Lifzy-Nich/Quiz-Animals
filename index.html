<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz City - Master Ibu Kota Dunia</title>
    <style>
        :root {
            --bg: #f0f4f8;
            --card-bg: #ffffff;
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --success: #00b894;
            --wrong: #ff7675;
            --text: #2d3436;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #74b9ff, #a29bfe);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: var(--card-bg);
            width: 90%;
            max-width: 550px;
            padding: 30px;
            border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            text-align: center;
        }

        h1 { color: var(--primary); margin: 0; font-size: 2rem; }
        .progress-info { color: #636e72; font-size: 0.85rem; margin-bottom: 20px; }

        .img-box {
            width: 100%;
            height: 250px;
            border-radius: 20px;
            overflow: hidden;
            background: #dfe6e9;
            margin-bottom: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        .img-box img { width: 100%; height: 100%; object-fit: cover; }

        .country-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 20px; display: block; }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .opt-btn {
            background: #f1f2f6;
            border: 2px solid #dfe6e9;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .opt-btn:hover { background: var(--secondary); color: white; border-color: var(--secondary); }
        .opt-btn.correct { background: var(--success) !important; color: white; border-color: var(--success); }
        .opt-btn.wrong { background: var(--wrong) !important; color: white; border-color: var(--wrong); }

        .hint-section { margin-top: 10px; min-height: 30px; }
        .btn-hint {
            background: none; border: 1px dashed var(--primary); color: var(--primary);
            padding: 5px 15px; border-radius: 20px; cursor: pointer; font-size: 0.8rem;
        }

        #feedback-msg { font-weight: bold; margin-top: 15px; height: 20px; }
    </style>
</head>
<body>

<div class="container" id="game-container">
    <h1>Quiz City</h1>
    <p class="progress-info" id="stats">Memuat data...</p>

    <div class="img-box">
        <img id="city-img" src="" alt="Kota">
    </div>

    <span class="country-title" id="country-name">Negara</span>

    <div class="options-grid" id="options-container">
        </div>

    <div class="hint-section">
        <button class="btn-hint" onclick="showHint()">Butuh Bantuan? (Hint)</button>
        <p id="hint-text" style="color: #d35400; font-size: 0.9rem; margin-top: 5px;"></p>
    </div>

    <p id="feedback-msg"></p>
</div>

<script>
    // Data Ibu Kota Lengkap (Disingkat untuk teknis, tapi mencakup semua logika)
    let countries = [
        { n: "Indonesia", i: "Jakarta" }, { n: "Jepang", i: "Tokyo" }, { n: "Prancis", i: "Paris" },
        { n: "Inggris", i: "London" }, { n: "Italia", i: "Roma" }, { n: "Amerika Serikat", i: "Washington D.C." },
        { n: "Jerman", i: "Berlin" }, { n: "Australia", i: "Canberra" }, { n: "Mesir", i: "Kairo" },
        { n: "Brasil", i: "Brasilia" }, { n: "Korea Selatan", i: "Seoul" }, { n: "Belanda", i: "Amsterdam" },
        { n: "Thailand", i: "Bangkok" }, { n: "Turki", i: "Ankara" }, { n: "Rusia", i: "Moskow" },
        { n: "India", i: "New Delhi" }, { n: "Kanada", i: "Ottawa" }, { n: "Arab Saudi", i: "Riyadh" },
        { n: "Malaysia", i: "Kuala Lumpur" }, { n: "Singapura", i: "Singapura" }, { n: "Spanyol", i: "Madrid" },
        { n: "Argentina", i: "Buenos Aires" }, { n: "Vietnam", i: "Hanoi" }, { n: "Filipina", i: "Manila" }
        // ... (Ari bisa menambah ribuan negara di sini, struktur tetap ringan)
    ];

    // Salin daftar ke pool aktif
    let activePool = [...countries];
    let currentData = {};
    let canAnswer = true;

    function initGame() {
        if (activePool.length === 0) {
            document.getElementById('game-container').innerHTML = "<h1>Selamat Ari!</h1><p>Semua ibu kota telah Anda taklukkan.</p><button onclick='location.reload()' style='padding:10px 20px; border-radius:10px; border:none; background:#6c5ce7; color:white;'>Main Lagi</button>";
            return;
        }

        canAnswer = true;
        const randomIndex = Math.floor(Math.random() * activePool.length);
        currentData = activePool[randomIndex];

        // Update Stats
        document.getElementById('stats').innerText = `Tersisa ${activePool.length} Negara untuk dipelajari`;
        
        // Update Gambar
        document.getElementById('city-img').src = `https://source.unsplash.com/800x600/?city,${currentData.i}`;
        document.getElementById('country-name').innerText = currentData.n;
        document.getElementById('hint-text').innerText = "";
        document.getElementById('feedback-msg').innerText = "";

        generateOptions();
    }

    function generateOptions() {
        const container = document.getElementById('options-container');
        container.innerHTML = "";

        // Ambil 3 jawaban salah secara acak dari database utama
        let wrongOptions = countries
            .filter(c => c.i !== currentData.i)
            .sort(() => 0.5 - Math.random())
            .slice(0, 3)
            .map(c => c.i);

        // Gabungkan dan acak
        let allOptions = [currentData.i, ...wrongOptions].sort(() => 0.5 - Math.random());

        allOptions.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(opt, btn);
            container.appendChild(btn);
        });
    }

    function checkAnswer(selected, btn) {
        if (!canAnswer) return;
        canAnswer = false;

        if (selected === currentData.i) {
            btn.classList.add('correct');
            document.getElementById('feedback-msg').innerText = "Hebat Ari! Jawaban Anda Benar.";
            document.getElementById('feedback-msg').style.color = "var(--success)";
            
            // HAPUS dari daftar jika benar
            activePool = activePool.filter(item => item.n !== currentData.n);
            
            setTimeout(initGame, 1500);
        } else {
            btn.classList.add('wrong');
            document.getElementById('feedback-msg').innerText = "Ups! Coba lagi di kesempatan berikutnya.";
            document.getElementById('feedback-msg').style.color = "var(--wrong)";
            
            // Tunjukkan yang benar
            Array.from(document.getElementsByClassName('opt-btn')).forEach(b => {
                if (b.innerText === currentData.i) b.classList.add('correct');
            });

            // Tetap di daftar (muncul lagi nanti secara random)
            setTimeout(initGame, 2000);
        }
    }

    function showHint() {
        document.getElementById('hint-text').innerText = `Ibu kota ini dimulai dengan huruf "${currentData.i[0]}"`;
    }

    window.onload = initGame;
</script>

</body>
</html>
